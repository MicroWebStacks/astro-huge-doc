---
import Layout from "@/layout/Layout.astro"
import AstroMarkdown from '@/components/markdown/AstroMarkdown.astro'
import { getEntry} from '@/libs/structure-db.js'

let {url} = Astro.params;
console.log(`in [...path] > path = ${url}`)
const entry = await getEntry({url:url})
if(!entry){
    throw new Error(`entry not found for url '${url}'`)
}

const headings = (Object.hasOwn(entry.data,"toc")&&entry.data.toc == false)?[]:entry.headings
---
<Layout title={entry.title} headings={headings} >
    <AstroMarkdown items={entry.items} data={entry.data} />
</Layout>
